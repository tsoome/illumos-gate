.\"
.\" Copyright 1989 AT&T
.\" Copyright (C) 2007, Sun Microsystems, Inc. All Rights Reserved
.\" The contents of this file are subject to the terms of the Common Development and Distribution License (the "License").  You may not use this file except in compliance with the License.
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE or http://www.opensolaris.org/os/licensing.  See the License for the specific language governing permissions and limitations under the License.
.\" When distributing Covered Code, include this CDDL HEADER in each file and include the License file at usr/src/OPENSOLARIS.LICENSE.  If applicable, add the following below this CDDL HEADER, with the fields enclosed by brackets "[]" replaced with your own identifying information: Portions Copyright [yyyy] [name of copyright owner]
.\" Copyright 2021 Toomas Soome <tsoome@me.com>
.Dd June 26, 2021
.Dt TFTP 1
.Os
.Sh NAME
.Nm tftp
.Nd trivial file transfer program
.Sh SYNOPSIS
.Nm
.Op Ar host Op Ar port
.Sh DESCRIPTION
.Nm
is the user interface to the Internet tftp (Trivial File Transfer Protocol),
which allows users to transfer files to and from a remote machine.
The remote
.Ar host
and optional
.Ar port
may be specified on the command line, in which case
.Nm
uses
.Ar host
as the default host, and if specified,
.Ar port
as the default port, for future transfers.
See the
.Sy connect
command below.
.Sh USAGE
Once
.Nm
is running, it issues the prompt
.Sy tftp>
and recognizes the following commands:
.Ss "Commands"
.Bl -tag -width "connect" -compact
.It Sy connect Ar host-name Op Ar port
.Pp
Set the
.Ar host ,
and optionally
.Ar port ,
for transfers.
The
.Sy TFTP
protocol, unlike the
.Sy FTP
protocol, does not maintain connections between transfers; thus, the
.Sy connect
command does not actually create a connection, but merely remembers what
host is to be used for transfers.
You do not have to use the
.Sy connect
command; the remote host can be specified as part of the
.Sy get
or
.Sy put
commands.
.Pp
.It Sy mode Ar transfer-mode
.Pp
Set the mode for transfers;
.Ar transfer-mode
may be one of
.Sy ascii
or
.Sy binary .
The default is
.Sy ascii .
.Pp
.It Sy put Ar filename
.It Sy put Ar localfile Ar remotefile
.It Sy put Ar filename1 Ar filename2 No ... Ar filenameN Ar remote-directory
.Pp
Transfer a file, or a set of files, to the specified remote file or directory.
The destination can be in one of two forms: a filename on the remote host if
the host has already been specified, or a string of the form:
.Bd -literal
.Ar host : Ns Ar filename
.Ed
.sp
to specify both a
.Ar host
and
.Ar filename
at the same time.
If the latter form is used, the specified host becomes the default for future
transfers.
If the remote-directory form is used, the remote host is assumed to be running
the UNIX system.
.sp
The
.Ar host
can be a host name (see
.Xr hosts 4 )
or an IPv4 or IPv6 address string (see
.Xr inet 7P
or
.Xr inet6 7P ) .
Since IPv6 addresses already contain colons
.Pq Sy \&: ,
the
.Ar host
must be enclosed in square brackets when an IPv6 address is used.
Otherwise, the first occurrence of a colon will be interpreted as the
separator between the
.Ar host
and the
.Ar filename .
For example,
.Bd -literal
[1080::8:800:200c:417A]:myfile
.Ed
.sp
Files may be written only if they already exist and are publicly writable.
See
.Xr in.tftpd 1M .
.Pp
.It Sy get Ar filename
.It Sy get Ar remotename Ar localname
.It Sy get Ar filename1 Ar filename2 Ar filename3 No ... Ar filenameN
.Pp
Get a file or set of files (three or more) from the specified remote
.Sy sources .
.Sy source
can be in one of two forms: a filename on the remote host if the host has
already been specified, or a string of the form:
.Bd -literal
.Ar host : Ns Ar filename
.Ed
.sp
to specify both a host and filename at the same time.
If the latter form is used, the last host specified becomes the default for
future transfers.
See the
.Sy put
command regarding specifying a
.Ar host .
.Pp
.It Sy quit
.Pp
Exit
.Nm tftp .
An
.Sy EOF
also exits.
.Pp
.It Sy verbose
.Pp
Toggle verbose mode.
.Pp
.It Sy trace
.Pp
Toggle packet tracing.
.Pp
.It Sy status
.Pp
Show current status.
.Pp
.It Sy rexmt Ar retransmission-timeout
.Pp
Set the per-packet retransmission timeout, in seconds.
.Pp
.It Sy timeout Ar total-transmission-timeout
.Pp
Set the total transmission timeout, in seconds.
.Pp
.It Sy ascii
.Pp
Shorthand for
.Sy mode Ar ascii .
.Pp
.It Sy binary
.Pp
Shorthand for
.Sy mode Ar binary .
.Pp
.It Sy blksize Ar transfer-blocksize
.Pp
The value of the transfer blocksize option to negotiate with the server.
A value of
.Ar 0
disables the negotiation of this option.
.Pp
.It Sy srexmt Ar server-retransmission-timeout
.Pp
The value of the retransmission timeout option to request that the server uses.
A value of
.Ar 0
disables the negotiation of this option.
.Pp
.It Sy tsize
.Pp
A toggle that sends the transfer size option to the server.
By default, the option is not sent.
The transfer size option is not sent with a
.Sy write
request when the
.Ar transfer-mode
is
.Ar ascii .
.Pp
.It Sy windowsize Ar size
.Pp
Sets the TFTP windowsize option in TFTP Read Request or Write Request packets to
.Ar size
blocks, as specified in RFC 7440.
Valid values are from 1 to 65535 inclusive.
The default windowsize is 1 block.
.Pp
.It Sy \&? Op Ar command-name  ...
.Pp
Print help information.
.El
.Sh SEE ALSO
.Xr in.tftpd 1M ,
.Xr hosts 4 ,
.Xr attributes 5 ,
.Xr inet 7P ,
.Xr inet6 7P
.Rs
.%A Malkin, G.
.%A Harkin, A.
.%T RFC 2347: TFTP Option Extension
.%I The Internet Society
.%D May 1998
.Re
.Rs
.%A Malkin, G.
.%A Harkin, A.
.%T RFC 2348, TFTP Blocksize Option
.%I The Internet Society
.%D May 1998
.Re
.Rs
.%A Malkin, G.
.%A Harkin, A.
.%T RFC 2349: TFTP Timeout Interval and Transfer Size Options
.%I The Internet Society
.%D May 1998
.Re
.Rs
.%A Sollins, K.R.
.%T RFC 1350: The TFTP Protocol (Revision 2)
.%I Network Working Group
.%D July 1992
.Re
.Rs
.%A Patric Masotta Serva
.%T RFC 7440: TFTP Windowsize Option
.%I Internet Engineering Task Force
.%D January 2015
.Re
.Sh NOTES
The default
.Ar transfer-mode
is
.Ar ascii .
This differs from pre-SunOS 4.0 and pre-4.3BSD systems, so explicit action
must be taken when transferring non-ASCII binary files such as executable
commands.
.sp
Because there is no user-login or validation within the
.Sy TFTP
protocol, many remote sites restrict file access in various ways.
Approved methods for file access are specific to each site, and
therefore cannot be documented here.
.sp
When using the
.Sy get
command to transfer multiple files from a remote host, three or more
files must be specified.
If two files are specified, the second file is used as a local file.
.sp
With the default block size of
.Ar 512
octets and a
.Sy 16 Ns - Ns
bit block counter, some
.Sy TFTP
implementations might have problems with files over
.Sy 33,553,919 No octets ( Ns Sy 513
octets short of
.Sy 32MB )
in size.
The illumos implementation can transfer files up to
.Sy 4GB
in size.
.sp
By default, the illumos
.Sy TFTP
client does not enable the
.Sy blocksize
or transfer size options.
Setting the
.Sy blocksize
option to a higher value is sometimes useful as a workaround when dealing
with peers that have a
.Sy 32MB
limit.
